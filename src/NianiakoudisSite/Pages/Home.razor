@page "/"
@inject IJSRuntime JSRuntime
@using MudBlazor

<MudBox Class="home-stack" Id="home-stack">

    <MudCarousel TData="HomeRow" EnableSwipeGesture="true" Class="home-carousel" ShowArrows="true" ShowBullets="true" AutoCycle="false" AutoCycleTime="@TimeSpan.FromSeconds(10)" Interval="20000" BulletsColor="Color.Primary" BulletsClass="home-bullets" ArrowsClass="home-arrows">


        <MudCarouselItem Class="@($"hero-transition {(HeroVisible ? "is-visible" : string.Empty)}")">
            <MudPaper Class="home-hero hero" Square="true" Elevation="1" Padding="0">
                <MudImage Src="/assets/pictures/homepage-handshake.jpg" Alt="Handshake" Class="home-hero-image" />
                <MudBox Class="home-hero-text">
                    <MudText Typo="Typo.body2" Class="home-hero-paragraph home-hero-paragraph-first">
                        TCS CONSULTING SERVICES
                    </MudText>
                    <MudText Typo="Typo.h6" Class="home-hero-paragraph home-hero-paragraph-second">
                        ΛΟΓΙΣΤΙΚΟ & ΦΟΡΟΤΕΧΝΙΚΟ ΓΡΑΦΕΙΟ
                    </MudText>
                    <MudText Typo="Typo.body2" Class="home-hero-paragraph home-hero-paragraph-third">
                        20 Χρόνια Εμπειρίας <span class="home-hero-paragraph-delayed">μαζί σας</span>
                    </MudText>
                </MudBox>
        </MudPaper>
        </MudCarouselItem>

        @for (var index = 0; index < Rows.Count; index++)
        {
            var row = Rows[index];
            var rowClass = index % 2 == 1 ? "home-row reverse" : "home-row";

            <MudCarouselItem Class="@rowClass">
                <MudPaper Class="home-row-card" Square="true" Elevation="1">
                    <MudGrid Class="home-row-grid" Spacing="0">
                        <MudItem xs="12" md="6" Class="home-copy">
                            <MudText Typo="Typo.h5">@row.Title</MudText>
                            <MudText Typo="Typo.body1" Class="home-body">@row.Body</MudText>
                            <MudButton Class="info-button" Variant="Variant.Filled" Color="Color.Secondary" Href="@row.Link">
                                &#x039C;&#x03AC;&#x03B8;&#x03B5;&#x03C4;&#x03B5; &#x03C0;&#x03B5;&#x03C1;&#x03B9;&#x03C3;&#x03C3;&#x03CC;&#x03C4;&#x03B5;&#x03C1;&#x03B1;
                            </MudButton>
                        </MudItem>
                        <MudItem xs="12" md="6" Class="home-visual">
                            <MudImage Src="@row.ImageUrl" Alt="@row.ImageAlt" Class="home-image" />
                        </MudItem>
                    </MudGrid>

                </MudPaper>
            </MudCarouselItem>
        }
    </MudCarousel>


    <HomeFlow Items="FlowItems">
        <MudContainer Square="true" Class="box-1" Gutter="false">
            <MudGrid Class="box-1-grid" Spacing="2">
                <MudItem xs="12" md="4" Class="box-1-left">
                    <MudText Typo="Typo.h5" Class="box-1-title">How to contact us?</MudText>
                    <MudText Typo="Typo.body1" Class="box-1-subtitle">
                        Reach us by email, phone, or LinkedIn.
                    </MudText>
                </MudItem>
                <MudItem xs="12" md="8">
                    <MudGrid Class="box-1-cards" Spacing="2">
                        <MudItem xs="12" md="4">
                            <MudPaper Class="box-1-card" Square="true" Elevation="1">
                                <MudIcon Icon="@Icons.Material.Filled.Email" Class="box-1-card-icon" />
                                <MudText Typo="Typo.subtitle2" Class="box-1-card-title">Email</MudText>
                                <MudLink Href="mailto:info@nianiakoudis.gr" Class="box-1-link">
                                    info@nianiakoudis.gr
                                </MudLink>
                            </MudPaper>
                        </MudItem>
                        <MudItem xs="12" md="4">
                            <MudPaper Class="box-1-card" Square="true" Elevation="1">
                                <MudIcon Icon="@Icons.Material.Filled.Phone" Class="box-1-card-icon" />
                                <MudText Typo="Typo.subtitle2" Class="box-1-card-title">Phone</MudText>
                                <MudLink Href="tel:+302311234567" Class="box-1-link">
                                    +30 231 123 4567
                                </MudLink>
                            </MudPaper>
                        </MudItem>
                        <MudItem xs="12" md="4">
                            <MudPaper Class="box-1-card" Square="true" Elevation="1">
                                <MudIcon Icon="@Icons.Material.Filled.Business" Class="box-1-card-icon" />
                                <MudText Typo="Typo.subtitle2" Class="box-1-card-title">LinkedIn</MudText>
                                <MudLink Href="https://www.linkedin.com/company/nianiakoudis" Target="_blank" Rel="noopener noreferrer" Class="box-1-link">
                                    linkedin.com/nianiakoudis
                                </MudLink>
                            </MudPaper>
                        </MudItem>
                    </MudGrid>
                </MudItem>
            </MudGrid>
        </MudContainer>

        <MudBox Class="home-flow-extra">
            <MudText Typo="Typo.h4" Class="home-flow-extra-title">
                Additional Insights
            </MudText>
            <MudText Typo="Typo.subtitle1" Class="home-flow-extra-body">
                A quick snapshot of how we support clients across core focus areas.
            </MudText>

            <MudBox Class="home-flow-extra-grid">
                @foreach (var card in FlowExtraCards)
                {
                    <MudPaper Class="box-1-card home-container home-flow-extra-card"
                              Square="true"
                              Elevation="2"
                              data-flow-index="@card.FlowIndex">
                        <MudText Typo="Typo.h6" Class="home-flow-extra-card-title">
                            @card.Title
                        </MudText>
                        <MudText Typo="Typo.subtitle2" Class="home-flow-extra-card-body">
                            @card.Body
                        </MudText>
                    </MudPaper>
                }
            </MudBox>
        </MudBox>
    </HomeFlow>
</MudBox>

@code {
    private static readonly List<HomeRow> Rows = new()
    {
        new HomeRow(
            "Lorem ipsum dolor",
            "Lorem ipsum dolor sit amet, consectetur adipiscing elit. Cras placerat vehicula felis, sed pretium dolor finibus vitae.",
            "/info-1",
            ImageUrl: "/assets/pictures/finance-calculator.jpg",
            "Finance calculator"),
        new HomeRow(
            "Dolor sit amet",
            "Integer hendrerit, justo ac suscipit posuere, orci lectus fermentum ligula, at pretium lorem felis vitae massa.",
            "/info-2",
            "/assets/pictures/analytics-dashboard.jpg",
            "Analytics dashboard"),
        new HomeRow(
            "Consectetur adipiscing",
            "Nulla facilisi. Vivamus id magna eu velit bibendum dictum sed sed lectus.",
            "/info-3",
            "/assets/pictures/consulting-contract.jpg",
            "Consulting contract"),
        new HomeRow(
            "Elit sed do",
            "Curabitur faucibus nulla et nibh vehicula, nec convallis mauris vulputate.",
            "/info-4",
            "/assets/pictures/workspace-laptop.jpg",
            "Workspace laptop")
    };

    private sealed record HomeRow(string Title, string Body, string Link, string ImageUrl, string ImageAlt);

    private bool HeroVisible { get; set; }

    private sealed record FlowExtraCard(string Title, string Body, int FlowIndex);

    private static readonly IReadOnlyList<HomeFlowItem> FlowItems = new[]
    {
        new HomeFlowItem(
            "WHO WE ARE",
            new[]
            {
                "We partner with teams on strategy, finance, and operations to turn insight into action.",
                "From discovery to delivery, we focus on measurable outcomes and clear next steps."
            },
            GridColumn: 1,
            GridRow: 1,
            FlowIndex: 0),
        new HomeFlowItem(
            "WHAT WE DO",
            new[]
            {
                "We partner with teams on strategy, finance, and operations to turn insight into action.",
                "From discovery to delivery, we focus on measurable outcomes and clear next steps."
            },
            GridColumn: 3,
            GridRow: 2,
            FlowIndex: 1),
        new HomeFlowItem(
            "WHAT WE DO",
            new[]
            {
                "We partner with teams on strategy, finance, and operations to turn insight into action.",
                "From discovery to delivery, we focus on measurable outcomes and clear next steps."
            },
            GridColumn: 2,
            GridRow: 3,
            FlowIndex: 2)
    };

    private static readonly IReadOnlyList<FlowExtraCard> FlowExtraCards = new[]
    {
        new FlowExtraCard(
            "Strategy Alignment",
            "Clarify goals, scope, and success metrics early.",
            3),
        new FlowExtraCard(
            "Financial Planning",
            "Build scenarios and budget models with confidence.",
            4),
        new FlowExtraCard(
            "Operational Design",
            "Map processes and identify efficiency gains.",
            5),
        new FlowExtraCard(
            "Execution Support",
            "Hands-on delivery alongside your teams.",
            6),
        new FlowExtraCard(
            "Performance Review",
            "Track KPIs and iterate on results.",
            7)
    };

    protected override async Task OnAfterRenderAsync(bool firstRender)
    {
        if (firstRender)
        {
            HeroVisible = true;
            await JSRuntime.InvokeVoidAsync("homeSectionsObserver.init", ".home-flow, .box-1");
            await InvokeAsync(StateHasChanged);
        }
    }

    private async Task ScrollToTop()
    {
        await JSRuntime.InvokeVoidAsync("eval", "document.querySelector('.content')?.scrollTo({ top: 0, behavior: 'smooth' })");
    }
}



@page "/"
@inject IJSRuntime JSRuntime
@using MudBlazor

<MudBox Class="home-stack" Id="home-stack">

    <MudCarousel TData="HomeRow" EnableSwipeGesture="true" Class="home-carousel" ShowArrows="false" ShowBullets="true" AutoCycle="true" AutoCycleTime="@TimeSpan.FromSeconds(10)" Interval="20000" BulletsColor="Color.Primary" BulletsClass="home-bullets">


        <MudCarouselItem Class="@($"hero-transition {(HeroVisible ? "is-visible" : string.Empty)}")">
            <MudPaper Class="home-hero hero" Square="true" Elevation="1" Padding="0">
                <MudImage Src="/assets/pictures/homepage-handshake.jpg" Alt="Handshake" Class="home-hero-image" />
                <MudBox Class="home-hero-text">
                    <MudText Typo="Typo.body2" Class="home-hero-paragraph home-hero-paragraph-first">
                        TCS CONSULTING SERVICES
                    </MudText>
                    <MudText Typo="Typo.h6" Class="home-hero-paragraph home-hero-paragraph-second">
                        ΛΟΓΙΣΤΙΚΟ & ΦΟΡΟΤΕΧΝΙΚΟ ΓΡΑΦΕΙΟ
                    </MudText>
                    <MudText Typo="Typo.body2" Class="home-hero-paragraph home-hero-paragraph-third">
                        20 Χρόνια Εμπειρίας <span class="home-hero-paragraph-delayed">μαζί σας</span>
                    </MudText>
                </MudBox>
        </MudPaper>
        </MudCarouselItem>

        @for (var index = 0; index < Rows.Count; index++)
        {
            var row = Rows[index];
            var rowClass = index % 2 == 1 ? "home-row reverse" : "home-row";

            <MudCarouselItem Class="@rowClass">
                <MudPaper Class="home-row-card" Square="true" Elevation="1">
                    <MudGrid Class="home-row-grid" Spacing="0">
                        <MudItem xs="12" md="6" Class="home-copy">
                            <MudText Typo="Typo.h5">@row.Title</MudText>
                            <MudText Typo="Typo.body1" Class="home-body">@row.Body</MudText>
                            <MudButton Class="info-button" Variant="Variant.Filled" Color="Color.Secondary" Href="@row.Link">
                                &#x039C;&#x03AC;&#x03B8;&#x03B5;&#x03C4;&#x03B5; &#x03C0;&#x03B5;&#x03C1;&#x03B9;&#x03C3;&#x03C3;&#x03CC;&#x03C4;&#x03B5;&#x03C1;&#x03B1;
                            </MudButton>
                        </MudItem>
                        <MudItem xs="12" md="6" Class="home-visual">
                            <MudImage Src="@row.ImageUrl" Alt="@row.ImageAlt" Class="home-image" />
                        </MudItem>
                    </MudGrid>

                </MudPaper>
            </MudCarouselItem>
        }
        
    </MudCarousel>

    <HomeFlow Items="FlowItems" Duration="13s">
        <HeaderContent>
            <MudBox Class="home-flow-header home-container" data-flow-index="0">
                <MudText Typo="Typo.h4" Class="home-flow-longform-title">
                    Welcome to TCS CONSULTING SERVICES
                </MudText>
            </MudBox>
        </HeaderContent>
        <ChildContent>
            <MudBox Class="home-flow-longform home-container" data-flow-index="4">
                <MudText Typo="Typo.h4" Class="home-flow-longform-title">
                    Overview
                </MudText>
                <MudText Typo="Typo.body1" Class="home-flow-longform-body">
                    Lorem ipsum dolor sit amet, consectetur adipiscing elit. Curabitur malesuada, purus non tempor vulputate,
                    mauris nisl suscipit lorem, sed tempus urna erat quis ipsum. Integer consequat metus nec lectus viverra,
                    at finibus velit feugiat. Sed feugiat posuere porta. Duis consequat mauris ac sem pulvinar, eget varius
                    dolor volutpat. Vivamus mollis dignissim elit, at tristique enim pretium sed. Nulla facilisi. Proin
                    eleifend sapien in lectus sagittis, ac pretium lacus blandit. Donec lacinia lorem quis purus dignissim
                    mollis. Pellentesque habitant morbi tristique senectus et netus et malesuada fames ac turpis egestas.
                </MudText>
                <MudText Typo="Typo.body1" Class="home-flow-longform-body">
                    Lorem ipsum dolor sit amet, consectetur adipiscing elit. Curabitur malesuada, purus non tempor vulputate,
                    mauris nisl suscipit lorem, sed tempus urna erat quis ipsum. Integer consequat metus nec lectus viverra,
                    at finibus velit feugiat. Sed feugiat posuere porta. Duis consequat mauris ac sem pulvinar, eget varius
                    dolor volutpat. Vivamus mollis dignissim elit, at tristique enim pretium sed. Nulla facilisi.
                </MudText>
            </MudBox>

            <MudBox Class="home-flow-extra">
                <MudBox Class="home-container home-flow-extra-header" data-flow-index="5">
                    <MudText Typo="Typo.h4" Class="home-flow-longform-title">
                        Additional Insights
                    </MudText>
                    <MudText Typo="Typo.subtitle1" Class="home-flow-extra-body">
                        A quick snapshot of how we support clients across core focus areas.
                    </MudText>
                </MudBox>

                <MudBox Class="home-flow-extra-grid">
                    @foreach (var card in FlowExtraCards)
                    {
                        <MudLink Href="@card.Link" Class="home-flow-extra-link" Underline="Underline.None">
                            <MudPaper Class="box-1-card home-container home-flow-extra-card"
                                      Square="true"
                                      Elevation="2"
                                      data-flow-index="@card.FlowIndex">
                                <MudText Typo="Typo.h6" Class="home-flow-extra-card-title">
                                    @card.Title
                                </MudText>
                                <MudText Typo="Typo.subtitle2" Class="home-flow-extra-card-body">
                                    @card.Body
                                </MudText>
                            </MudPaper>
                        </MudLink>
                    }
                </MudBox>
            </MudBox>

            <MudContainer Square="true" Class="box-1 home-container" Gutter="false" data-flow-index="11">
                <MudGrid Class="box-1-grid" Spacing="2">
                    <MudItem xs="12" md="4" Class="box-1-left">
                        <MudText Typo="Typo.h5" Class="box-1-title">How to contact us?</MudText>
                        <MudText Typo="Typo.body1" Class="box-1-subtitle">
                            Reach us by email, phone, or LinkedIn.
                        </MudText>
                    </MudItem>
                    <MudItem xs="12" md="8">
                        <MudGrid Class="box-1-cards" Spacing="2">
                            <MudItem xs="12" md="4">
                                <MudPaper Class="box-1-card" Square="true" Elevation="1">
                                    <MudIcon Icon="@Icons.Material.Filled.Email" Class="box-1-card-icon" />
                                    <MudText Typo="Typo.subtitle2" Class="box-1-card-title">Email</MudText>
                                    <MudLink Href="mailto:info@nianiakoudis.gr" Class="box-1-link">
                                        info@nianiakoudis.gr
                                    </MudLink>
                                </MudPaper>
                            </MudItem>
                            <MudItem xs="12" md="4">
                                <MudPaper Class="box-1-card" Square="true" Elevation="1">
                                    <MudIcon Icon="@Icons.Material.Filled.Phone" Class="box-1-card-icon" />
                                    <MudText Typo="Typo.subtitle2" Class="box-1-card-title">Phone</MudText>
                                    <MudLink Href="tel:+302311234567" Class="box-1-link">
                                        +30 231 123 4567
                                    </MudLink>
                                </MudPaper>
                            </MudItem>
                            <MudItem xs="12" md="4">
                                <MudPaper Class="box-1-card" Square="true" Elevation="1">
                                    <MudIcon Icon="@Icons.Material.Filled.Business" Class="box-1-card-icon" />
                                    <MudText Typo="Typo.subtitle2" Class="box-1-card-title">LinkedIn</MudText>
                                    <MudLink Href="https://www.linkedin.com/company/nianiakoudis" Target="_blank" Rel="noopener noreferrer" Class="box-1-link">
                                        linkedin.com/nianiakoudis
                                    </MudLink>
                                </MudPaper>
                            </MudItem>
                        </MudGrid>
                    </MudItem>
                </MudGrid>
            </MudContainer>
        </ChildContent>
    </HomeFlow>
</MudBox>

@code {
    private static readonly List<HomeRow> Rows = new()
    {
        new HomeRow(
            "Lorem ipsum dolor",
            "Lorem ipsum dolor sit amet, consectetur adipiscing elit. Cras placerat vehicula felis, sed pretium dolor finibus vitae.",
            "/info-1",
            ImageUrl: "/assets/pictures/finance-calculator.jpg",
            "Finance calculator"),
        new HomeRow(
            "Dolor sit amet",
            "Integer hendrerit, justo ac suscipit posuere, orci lectus fermentum ligula, at pretium lorem felis vitae massa.",
            "/info-2",
            "/assets/pictures/analytics-dashboard.jpg",
            "Analytics dashboard"),
        new HomeRow(
            "Consectetur adipiscing",
            "Nulla facilisi. Vivamus id magna eu velit bibendum dictum sed sed lectus.",
            "/info-3",
            "/assets/pictures/consulting-contract.jpg",
            "Consulting contract"),
        new HomeRow(
            "Elit sed do",
            "Curabitur faucibus nulla et nibh vehicula, nec convallis mauris vulputate.",
            "/info-4",
            "/assets/pictures/workspace-laptop.jpg",
            "Workspace laptop"),
        new HomeRow(
            "Tempor incididunt",
            "Sed do eiusmod tempor incididunt ut labore et dolore magna aliqua.",
            "/info-5",
            "/assets/pictures/contact-us.jpg",
            "Contact us")
    };

    private sealed record HomeRow(string Title, string Body, string Link, string ImageUrl, string ImageAlt);

    private bool HeroVisible { get; set; }

    private sealed record FlowExtraCard(string Title, string Body, int FlowIndex, string Link);

    private static readonly IReadOnlyList<HomeFlowItem> FlowItems = new[]
    {
        new HomeFlowItem(
            "WHO WE ARE",
            new[]
            {
                "We partner with teams on strategy, finance, and operations to turn insight into action.",
                "From discovery to delivery, we focus on measurable outcomes and clear next steps."
            },
            GridColumn: 1,
            GridRow: 1,
            FlowIndex: 1),
        new HomeFlowItem(
            "WHAT WE DO",
            new[]
            {
                "We partner with teams on strategy, finance, and operations to turn insight into action.",
                "From discovery to delivery, we focus on measurable outcomes and clear next steps."
            },
            GridColumn: 3,
            GridRow: 2,
            FlowIndex: 2),
        new HomeFlowItem(
            "WHAT WE DO",
            new[]
            {
                "We partner with teams on strategy, finance, and operations to turn insight into action.",
                "From discovery to delivery, we focus on measurable outcomes and clear next steps."
            },
            GridColumn: 2,
            GridRow: 3,
            FlowIndex: 3)
    };

    private static readonly IReadOnlyList<FlowExtraCard> FlowExtraCards = new[]
    {
        new FlowExtraCard(
            "Strategy Alignment",
            "Clarify goals, scope, and success metrics early.",
            6,
            "/info-1"),
        new FlowExtraCard(
            "Financial Planning",
            "Build scenarios and budget models with confidence.",
            7,
            "/info-2"),
        new FlowExtraCard(
            "Operational Design",
            "Map processes and identify efficiency gains.",
            8,
            "/info-3"),
        new FlowExtraCard(
            "Execution Support",
            "Hands-on delivery alongside your teams.",
            9,
            "/info-4"),
        new FlowExtraCard(
            "Performance Review",
            "Track KPIs and iterate on results.",
            10,
            "/info-5")
    };

    protected override async Task OnAfterRenderAsync(bool firstRender)
    {
        if (firstRender)
        {
            HeroVisible = true;
            await JSRuntime.InvokeVoidAsync("homeSectionsObserver.init", ".home-flow");
            await InvokeAsync(StateHasChanged);
        }
    }

    private async Task ScrollToTop()
    {
        await JSRuntime.InvokeVoidAsync("eval", "document.querySelector('.content')?.scrollTo({ top: 0, behavior: 'smooth' })");
    }
}



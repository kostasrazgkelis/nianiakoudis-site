@page "/"
@inject IJSRuntime JSRuntime
@using MudBlazor

<MudBox Class="home-stack" Id="home-stack">

    <MudCarousel TData="HomeRow" EnableSwipeGesture="true" Class="home-carousel" ShowArrows="true" ShowBullets="true" AutoCycle="false" AutoCycleTime="@TimeSpan.FromSeconds(10)" Interval="20000" BulletsColor="Color.Primary" BulletsClass="home-bullets" ArrowsClass="home-arrows">


        <MudCarouselItem Class="@($"hero-transition {(HeroVisible ? "is-visible" : string.Empty)}")">
            <MudPaper Class="home-hero hero" Square="true" Elevation="1" Padding="0">
                <MudImage Src="/assets/pictures/homepage-handshake.jpg" Alt="Handshake" Class="home-hero-image" />
                <MudBox Class="home-hero-text">
                    <MudText Typo="Typo.body2" Class="home-hero-paragraph home-hero-paragraph-first">
                        TCS CONSULTING SERVICES
                    </MudText>
                    <MudText Typo="Typo.h6" Class="home-hero-paragraph home-hero-paragraph-second">
                        ΛΟΓΙΣΤΙΚΟ & ΦΟΡΟΤΕΧΝΙΚΟ ΓΡΑΦΕΙΟ
                    </MudText>
                    <MudText Typo="Typo.body2" Class="home-hero-paragraph home-hero-paragraph-third">
                        20 Χρόνια Εμπειρίας <span class="home-hero-paragraph-delayed">μαζί σας</span>
                    </MudText>
                </MudBox>
        </MudPaper>
        </MudCarouselItem>

        @for (var index = 0; index < Rows.Count; index++)
        {
            var row = Rows[index];
            var rowClass = index % 2 == 1 ? "home-row reverse" : "home-row";

            <MudCarouselItem Class="@rowClass">
                <MudPaper Class="home-row-card" Square="true" Elevation="1">
                    <MudGrid Class="home-row-grid" Spacing="0">
                        <MudItem xs="12" md="6" Class="home-copy">
                            <MudText Typo="Typo.h5">@row.Title</MudText>
                            <MudText Typo="Typo.body1" Class="home-body">@row.Body</MudText>
                            <MudButton Class="info-button" Variant="Variant.Filled" Color="Color.Secondary" Href="@row.Link">
                                &#x039C;&#x03AC;&#x03B8;&#x03B5;&#x03C4;&#x03B5; &#x03C0;&#x03B5;&#x03C1;&#x03B9;&#x03C3;&#x03C3;&#x03CC;&#x03C4;&#x03B5;&#x03C1;&#x03B1;
                            </MudButton>
                        </MudItem>
                        <MudItem xs="12" md="6" Class="home-visual">
                            <MudImage Src="@row.ImageUrl" Alt="@row.ImageAlt" Class="home-image" />
                        </MudItem>
                    </MudGrid>

                </MudPaper>
            </MudCarouselItem>
        }
    </MudCarousel>


    <MudContainer MaxWidth="MaxWidth.Large">
        <MudBox Class="home-flow">
            <svg class="home-flow-line" viewBox="0 0 100 100" preserveAspectRatio="none" aria-hidden="true">
                <path id="home-flow-track" class="home-flow-track" d="@AnimatedSections" />
                <path class="home-flow-trail" d="@AnimatedSections">
                    <animate class="home-flow-trail-draw" attributeName="stroke-dashoffset" dur="5.5s" begin="indefinite" fill="freeze" />
                </path>
                <g class="home-flow-head">
                    <circle class="home-flow-head-glow" cx="0" cy="0" r="6" />
                    <circle class="home-flow-head-core" cx="0" cy="0" r="3" />
                    <animateMotion class="home-flow-head-motion" dur="5.5s" begin="indefinite" fill="freeze" rotate="auto">
                        <mpath href="#home-flow-track" />
                    </animateMotion>
                </g>
            </svg>

        <MudBox  Class="home-sections">

            <MudContainer Class="home-container-1">
                <MudPaper Class="box-1-card" Square="true" Elevation="3">

                    <MudText Typo="Typo.h3" Class="home-second-title">
                        WHO WE ARE
                    </MudText>

                    <MudText Typo="Typo.subtitle1" Class="home-second-body">
                        We partner with teams on strategy, finance, and operations to turn insight into action.
                        From discovery to delivery, we focus on measurable outcomes and clear next steps.
                    </MudText>
                    <MudText Typo="Typo.subtitle1" Class="home-second-body">
                        Explore case studies and service details below, or contact us for a tailored engagement.
                    </MudText>

                </MudPaper>
            </MudContainer>

            <MudContainer Class="home-container-2">

                <MudPaper Class="box-1-card" Square="true" Elevation="3">

                    <MudText Typo="Typo.h3" Class="home-second-title">
                        WHAT WE DO
                    </MudText>

                    <MudText Typo="Typo.subtitle1" Class="home-second-body">
                        We partner with teams on strategy, finance, and operations to turn insight into action.
                        From discovery to delivery, we focus on measurable outcomes and clear next steps.
                    </MudText>
                    <MudText Typo="Typo.subtitle1" Class="home-second-body">
                        Explore case studies and service details below, or contact us for a tailored engagement.
                    </MudText>
                </MudPaper>

            </MudContainer>

            <MudContainer MaxWidth="MaxWidth.False" Class="home-container-3">
                <MudPaper Class="box-1-card" Square="true" Elevation="3">
                    <MudText Typo="Typo.h3" Class="home-second-title">
                        WHAT WE DO
                    </MudText>
    
                    <MudText Typo="Typo.subtitle1" Class="home-second-body">
                        We partner with teams on strategy, finance, and operations to turn insight into action.
                        From discovery to delivery, we focus on measurable outcomes and clear next steps.
                    </MudText>
                    <MudText Typo="Typo.subtitle1" Class="home-second-body">
                        Explore case studies and service details below, or contact us for a tailored engagement.
                    </MudText>
                </MudPaper>
            </MudContainer>
        </MudBox>

        <MudContainer Square="true" Class="box-1" Gutter="false">
            <MudGrid Class="box-1-grid" Spacing="2">
                <MudItem xs="12" md="4" Class="box-1-left">
                    <MudText Typo="Typo.h5" Class="box-1-title">How to contact us?</MudText>
                    <MudText Typo="Typo.body1" Class="box-1-subtitle">
                        Reach us by email, phone, or LinkedIn.
                    </MudText>
                </MudItem>
                <MudItem xs="12" md="8">
                    <MudGrid Class="box-1-cards" Spacing="2">
                        <MudItem xs="12" md="4">
                            <MudPaper Class="box-1-card" Square="true" Elevation="1">
                                <MudIcon Icon="@Icons.Material.Filled.Email" Class="box-1-card-icon" />
                                <MudText Typo="Typo.subtitle2" Class="box-1-card-title">Email</MudText>
                                <MudLink Href="mailto:info@nianiakoudis.gr" Class="box-1-link">
                                    info@nianiakoudis.gr
                                </MudLink>
                            </MudPaper>
                        </MudItem>
                        <MudItem xs="12" md="4">
                            <MudPaper Class="box-1-card" Square="true" Elevation="1">
                                <MudIcon Icon="@Icons.Material.Filled.Phone" Class="box-1-card-icon" />
                                <MudText Typo="Typo.subtitle2" Class="box-1-card-title">Phone</MudText>
                                <MudLink Href="tel:+302311234567" Class="box-1-link">
                                    +30 231 123 4567
                                </MudLink>
                            </MudPaper>
                        </MudItem>
                        <MudItem xs="12" md="4">
                            <MudPaper Class="box-1-card" Square="true" Elevation="1">
                                <MudIcon Icon="@Icons.Material.Filled.Business" Class="box-1-card-icon" />
                                <MudText Typo="Typo.subtitle2" Class="box-1-card-title">LinkedIn</MudText>
                                <MudLink Href="https://www.linkedin.com/company/nianiakoudis" Target="_blank" Rel="noopener noreferrer" Class="box-1-link">
                                    linkedin.com/nianiakoudis
                                </MudLink>
                            </MudPaper>
                        </MudItem>
                    </MudGrid>
                </MudItem>
            </MudGrid>
        </MudContainer>
        </MudBox>
    </MudContainer>
</MudBox>

@code {
    private static readonly List<HomeRow> Rows = new()
    {
        new HomeRow(
            "Lorem ipsum dolor",
            "Lorem ipsum dolor sit amet, consectetur adipiscing elit. Cras placerat vehicula felis, sed pretium dolor finibus vitae.",
            "/info-1",
            ImageUrl: "/assets/pictures/finance-calculator.jpg",
            "Finance calculator"),
        new HomeRow(
            "Dolor sit amet",
            "Integer hendrerit, justo ac suscipit posuere, orci lectus fermentum ligula, at pretium lorem felis vitae massa.",
            "/info-2",
            "/assets/pictures/analytics-dashboard.jpg",
            "Analytics dashboard"),
        new HomeRow(
            "Consectetur adipiscing",
            "Nulla facilisi. Vivamus id magna eu velit bibendum dictum sed sed lectus.",
            "/info-3",
            "/assets/pictures/consulting-contract.jpg",
            "Consulting contract"),
        new HomeRow(
            "Elit sed do",
            "Curabitur faucibus nulla et nibh vehicula, nec convallis mauris vulputate.",
            "/info-4",
            "/assets/pictures/workspace-laptop.jpg",
            "Workspace laptop")
    };

    private sealed record HomeRow(string Title, string Body, string Link, string ImageUrl, string ImageAlt);

    private bool HeroVisible { get; set; }
    
    private string AnimatedSections { get; } = "M78 6 L78 16 Q78 26 74 26 L20 26 Q16 26 16 30 L16 56 Q16 60 20 60 L84 60 Q88 60 88 64 L88 80 Q88 84 84 84 L20 84 Q16 84 16 88 Q16 92 20 92 L52 92";

    protected override async Task OnAfterRenderAsync(bool firstRender)
    {
        if (firstRender)
        {
            HeroVisible = true;
            await JSRuntime.InvokeVoidAsync("homeSectionsObserver.init", ".home-flow, .box-1");
            await InvokeAsync(StateHasChanged);
        }
    }

    private async Task ScrollToTop()
    {
        await JSRuntime.InvokeVoidAsync("eval", "document.querySelector('.content')?.scrollTo({ top: 0, behavior: 'smooth' })");
    }
}


